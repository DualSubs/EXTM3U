// minify: https://www.digitalocean.com/community/tools/minify
function EXTM3U(n,e){return new class{constructor(n,e){this.name=n,Object.assign(this,e)}parse(n=new String,e="EXT-X-MEDIA",r=[]){const t=/^(?<EXT>(EXT|AIV)[^:]+):(?<OPTION>.+)([^](?<URI>.+))?/;let o={headers:n.match(/^#(?<fileType>EXTM3U)?[^]*/)?.groups??"",option:n.match(/^#(?<EXT>EXT-X-[^:]+)$/m)?.groups??[],body:n.split(/[(\r\n)\r\n]#/).map((n=>n.match(t)?.groups??""))};return o.body=o.body.map((n=>(n?.EXT==e&&(n.OPTION=Object.fromEntries(n.OPTION.split(",").map((n=>n.split("="))))),n))),o}stringify(n={headers:{},option:[],body:[]},e="EXT-X-MEDIA",r=["\n"]){const t=r.includes("\n")?"\n":r.includes("\r")?"\r":r.includes("\r\n")?"\r\n":"\n";return[n.headers="#"+n.headers.fileType,n.option=n.option.join(t),n.body=n.body.map((n=>{if(n)return n?.EXT==e&&(n.OPTION=Object.entries(n.OPTION).map((n=>n.join("="))).join(",")),"EXT-X-STREAM-INF"==n.EXT?"#"+n.EXT+":"+n.OPTION+t+n.URI:"#"+n.EXT+":"+n.OPTION})).join(t)].join(t)}}(n,e)}
