// minify: https://www.digitalocean.com/community/tools/minify
function EXTM3U(n,e){return new class{constructor(n,e){this.name=n,Object.assign(this,e)}parse(n="",e="EXT-X-MEDIA",t=[]){const o=/^(?<EXT>(EXT|AIV)[^:]+):(?<OPTION>.+)([^](?<URI>.+))?[^]*$/;let i={headers:n.match(/^#(?<fileType>EXTM3U)?[^]*/)?.groups??"",option:n.match(/^#(?<EXT>EXT-X-[^:]+)$/gm)??[],body:n.split(/[^]#/).map((n=>n.match(o)?.groups??""))};return i.body=i.body.map((n=>(n?.EXT==e&&(n.OPTION=Object.fromEntries(n.OPTION.split(/,(?=[A-Z])/).map((n=>n.split("="))))),n))),i}stringify(n={headers:{},option:[],body:[]},e="EXT-X-MEDIA",t=["\n"]){const o=t.includes("\n")?"\n":t.includes("\r")?"\r":t.includes("\r\n")?"\r\n":"\n";return[n.headers="#"+n.headers.fileType,n.option=n.option.join(o),n.body=n.body.map((n=>{if(n)return n?.EXT==e&&(n.OPTION=Object.entries(n.OPTION).map((n=>n.join("="))).join(",")),"EXT-X-STREAM-INF"==n.EXT?"#"+n.EXT+":"+n.OPTION+o+n.URI:"#"+n.EXT+":"+n.OPTION})).join(o)].join(o)}}(n,e)}
